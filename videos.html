<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tab title -->
  <title>YouTube Portfolio | ADMINISTRATIVE RESULTS</title>

  <!-- Favicon -->
  <link rel="icon" href="assets/images/favicon.png" type="image/png" />

  <!-- Social Sharing Tags -->
  <meta property="og:title" content="Home of the AR64A" />
  <meta property="og:description" content="The AR64A H-Harness Patrol Rig—private-merc vibes, built for operators." />
  <meta property="og:image" content="https://administrativeresults.github.io/assets/images/preview.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:url" content="https://administrativeresults.github.io/" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Home of the AR64A" />
  <meta name="twitter:description" content="The AR64A H-Harness Patrol Rig—private-merc vibes, built for operators." />
  <meta name="twitter:image" content="https://administrativeresults.github.io/assets/images/preview.jpg" />

  <!-- Inter Font (matching index) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous" />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <!-- Font Awesome (for icons) -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-pTg6vAPDFCA+WB9Sgy0/sGxEk/ckG6VXihYE+LfR6N6+qSShiBTikpLgEFH3ylLAOIQ+9oNkP+Unx5p+X0COlw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <style>
    /* ─────────────────────────────────────────────────────────────────────────────
       Root Variables
       ───────────────────────────────────────────────────────────────────────────── */
    :root {
      --font-sans: 'Inter', sans-serif;
      --background: #ffffff;      /* Entire page background white */
      --text-color: #000000;      /* All text black */
      --accent-color: #e4ac45;    /* Yellow accent */
      --card-bg: #ffffff;         /* Cards also white */
      --card-radius: 0.5rem;
      --card-shadow: rgba(0,0,0,0.1) 0px 4px 12px;
      --icon-filter: none;        /* Icons show in original */
      --icon-hover-filter: none;
      --footer-link-hover: #666666; /* Grey on hover, if any text links appear */
    }

    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }

    /* Reset & Box-Sizing */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    /* ─────────────────────────── Body & Links ─────────────────────────── */
    body {
      background: var(--background);
      color: var(--text-color);
      font-family: var(--font-sans);
      line-height: 1.6;
      margin: 0;
      padding-top: 4rem; /* accommodate fixed header */
    }
    a {
      color: var(--accent-color);
      text-decoration: none;
    }
    a:hover {
      text-decoration: none;
    }

    /* ─────────────────────────── Header ─────────────────────────── */
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 4rem;
      background: var(--background);
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 2rem;
      /* Removed drop shadow */
      box-shadow: none;
      z-index: 100;
    }
    header .logo-link {
      display: flex;
      align-items: center;
      text-decoration: none;
      color: var(--text-color);
    }
    header .logo-link img {
      height: 32px;
      width: auto;
      margin-right: 0.5rem;
      filter: none;
    }
    header .logo-text {
      font-size: 1.125rem;
      font-weight: 600;
    }
    header nav.desktop-nav {
      display: flex;
      gap: 2rem;
    }
    header nav.desktop-nav a {
      font-size: 1rem;
      font-weight: 500;
      color: var(--text-color);
    }
    header nav.desktop-nav a:hover {
      color: var(--accent-color);
    }
    .menu-toggle {
      display: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-color);
      background: none;
      border: none;
    }
    header nav#mobileMenu {
      display: none;
      position: absolute;
      top: 4rem;
      right: 0;
      width: 100%;
      background: var(--background);
      flex-direction: column;
      text-align: right;
      /* Removed drop shadow */
      box-shadow: none;
    }
    header nav#mobileMenu a {
      padding: 1rem 2rem;
      border-bottom: 1px solid #ddd;
      color: var(--text-color);
      font-size: 1rem;
      font-weight: 500;
      text-align: right;
    }
    header nav#mobileMenu a:hover {
      background: #f5f5f5;
    }
    @media (max-width: 768px) {
      header nav.desktop-nav {
        display: none;
      }
      .menu-toggle {
        display: block;
      }
      header nav#mobileMenu.active {
        display: flex;
      }
    }

    /* ───────────────────────── Page Hero ───────────────────────── */
    .page-hero {
      background: var(--background);
      text-align: center;
      margin: 2rem 1rem 3rem;
    }
    .page-title {
      font-size: 2.5rem;
      color: var(--text-color);
      margin-bottom: 0.5rem;
      font-weight: 700;
    }
    .page-subtitle {
      font-size: 1.1rem;
      color: var(--text-color);
      opacity: 0.8;
      max-width: 800px;
      margin: 0 auto;
    }

    /* ───────────────────────── Videos Section ───────────────────────── */
    #videos {
      background: var(--background);
      color: var(--text-color);
      padding: 2rem 0 4rem;
    }

    /* Video Grid */
    #video-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }
    .video-card {
      background: var(--card-bg);
      border-radius: var(--card-radius);
      box-shadow: var(--card-shadow);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: transform 0.2s ease;
    }
    .video-card:hover {
      transform: translateY(-4px);
    }
    .video-thumb-container {
      position: relative;
      width: 100%;
      padding-top: 56.25%;
      background: #000;
    }
    .video-thumb-container img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center center;
    }
    .video-info {
      padding: 1rem;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .video-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
      margin-bottom: 0.5rem;
    }
    .video-views {
      font-size: 0.9rem;
      color: var(--text-color);
      opacity: 0.7;
    }

    /* Loading Text */
    #loading {
      text-align: center;
      margin: 2rem 0;
      font-size: 1.2rem;
      color: var(--text-color);
      opacity: 0.7;
    }

    /* Pagination Controls */
    #pagination {
      margin: 2rem auto 4rem;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
      padding: 0 1rem;
    }
    #pagination .page-btn {
      background: var(--accent-color);
      color: #000;
      border: none;
      border-radius: 4px;
      padding: 0.5rem 0.75rem;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s ease;
      font-size: 0.95rem;
    }
    #pagination .page-btn:hover:not(.current) {
      background: #d39f38;
    }
    #pagination .page-btn.current {
      background: var(--text-color);
      color: #fff;
      cursor: default;
    }

    /* ───────────────────────────── Footer ───────────────────────────── */
footer {
  background: var(--background);
  color: var(--text-color);
  padding: 2rem 2rem;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  /* No drop shadow/separator */
  box-shadow: none;
}

/* Footer: sponsors on the left */
footer .sponsors {
  display: flex;
  gap: 1.5rem;
  align-items: center;
}
footer .sponsors a img {
  height: 32px;
  width: auto;
  object-fit: contain;
  opacity: 0.5;                     /* start faded */
  transition: opacity 0.15s ease;   /* fade transition */
}
footer .sponsors a img:hover {
  opacity: 1;                       /* fully opaque on hover */
}

/* Footer: social links on the right */
footer .social-links {
  display: flex;
  gap: 1.5rem;
  align-items: center;
}
footer .social-links a img {
  height: 24px;
  width: 24px;
  object-fit: contain;
  opacity: 0.5;                     /* start faded */
  transition: opacity 0.15s ease;   /* fade transition */
}
footer .social-links a img:hover {
  opacity: 1;                       /* fully opaque on hover */
}

@media (max-width: 768px) {
  footer {
    flex-direction: column;
    text-align: center;
  }
  footer .sponsors,
  footer .social-links {
    margin-bottom: 1rem;
  }
}
  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <a href="index.html" class="logo-link">
      <img src="assets/images/logo.png" alt="Administrative Results Logo" />
      <span class="logo-text">ADMINISTRATIVE RESULTS</span>
    </a>

    <nav class="desktop-nav">
      <a href="index.html">Home</a>
      <a href="videos.html">Videos</a>
      <a href="service.html">Customer Service</a>
    </nav>

    <button class="menu-toggle" onclick="toggleMenu()">☰</button>
    <nav id="mobileMenu">
      <a href="index.html">Home</a>
      <a href="videos.html">Videos</a>
      <a href="service.html">Customer Service</a>
    </nav>
  </header>

  <!-- Page Hero (Title & Subtitle) -->
  <div class="page-hero">
    <h1 class="page-title">Please watch...</h1>
    <p class="page-subtitle">
      At Administrative Results we strive to educate where we can, and entertain all the time.<br />
      We are passionate about the 2nd Amendment and the way of life it is meant to preserve.
    </p>
  </div>

  <!-- Videos Section -->
  <section id="videos">
    <!-- Video Grid -->
    <div id="video-grid"></div>
    <p id="loading">Loading videos… please wait.</p>

    <!-- Pagination Controls -->
    <div id="pagination"></div>
  </section>

  <!-- Footer -->
  <footer>
    <!-- Left: Sponsor Logos -->
    <div class="sponsors">
      <a href="https://badlandsmunitionsco.com/" target="_blank" rel="noopener">
        <img src="assets/images/sponsor1-logo.png" alt="Sponsor 1" />
      </a>
      <a href="https://www.americanapipedream.com/" target="_blank" rel="noopener">
        <img src="assets/images/sponsor2-logo.png" alt="Sponsor 2" />
      </a>
      <a href="https://www.opticsplanet.com/" target="_blank" rel="noopener">
        <img src="assets/images/sponsor3-logo.png" alt="Sponsor 3" />
      </a>
    </div>

    <!-- Right: Social Media Icons -->
    <div class="social-links">
      <a href="https://www.youtube.com/@AdministrativeResults" target="_blank" rel="noopener">
        <img src="assets/images/youTube-icon.png" alt="YouTube" />
      </a>
      <a href="https://www.instagram.com/administrativeresults" target="_blank" rel="noopener">
        <img src="assets/images/instagram-icon.png" alt="Instagram" />
      </a>
      <a href="https://www.pepperbox.tv/" target="_blank" rel="noopener">
        <img src="assets/images/pepperbox-icon.png" alt="Pepperbox" />
      </a>
    </div>
  </footer>

  <!-- Toggle Mobile Menu Script -->
  <script>
    function toggleMenu() {
      document.getElementById('mobileMenu').classList.toggle('active');
    }
  </script>

  <!-- YouTube + Pagination Script -->
  <script>
    // 1) CONFIGURATION
    const API_KEY    = 'AIzaSyDjwfqf775NaJ0vJyN7eRbp69EFzcNI6WA'; // Your YouTube API key
    const CHANNEL_ID = 'UC3QjBcBCtS4I-OWKpTBBFWA';                  // Channel ID
    const PAGE_SIZE  = 30;                                          // videos per page

    // 2) FORMAT NUMBERS
    function formatNumber(num) {
      return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    // 3) FETCH UPLOADS PLAYLIST ID
    async function fetchUploadsPlaylistId() {
      const endpoint = `https://www.googleapis.com/youtube/v3/channels`
        + `?part=contentDetails&id=${CHANNEL_ID}&key=${API_KEY}`;
      const res = await fetch(endpoint);
      const data = await res.json();
      if (data.items && data.items.length > 0) {
        return data.items[0].contentDetails.relatedPlaylists.uploads;
      } else {
        throw new Error('Channel not found or no contentDetails available.');
      }
    }

    // 4) FETCH ALL VIDEO IDs
    async function fetchAllVideoIds(playlistId) {
      let videoIds = [];
      let nextPageToken = '';
      do {
        const url = new URL('https://www.googleapis.com/youtube/v3/playlistItems');
        url.search = new URLSearchParams({
          part: 'contentDetails',
          maxResults: '50',
          playlistId: playlistId,
          pageToken: nextPageToken,
          key: API_KEY
        });
        const resp = await fetch(url);
        const json = await resp.json();
        if (json.items) {
          json.items.forEach(item => {
            videoIds.push(item.contentDetails.videoId);
          });
        }
        nextPageToken = json.nextPageToken || '';
      } while (nextPageToken);
      return videoIds;
    }

    // 5) FETCH VIDEO DETAILS
    async function fetchVideoDetails(allIds) {
      const BATCH_SIZE = 50;
      let details = [];
      for (let i = 0; i < allIds.length; i += BATCH_SIZE) {
        const batchIds = allIds.slice(i, i + BATCH_SIZE).join(',');
        const url = new URL('https://www.googleapis.com/youtube/v3/videos');
        url.search = new URLSearchParams({
          part: 'snippet,statistics,contentDetails',
          id: batchIds,
          key: API_KEY
        });
        const resp = await fetch(url);
        const json = await resp.json();
        if (json.items) {
          details.push(...json.items);
        }
      }
      return details;
    }

    // 6) FILTER & SORT VIDEOS
    function filterLongFormVideos(videoItems) {
      return videoItems
        .filter(item => {
          const dur = item.contentDetails.duration;
          return !/^PT\d+S$/.test(dur);
        })
        .sort((a, b) => {
          const dateA = new Date(a.snippet.publishedAt).getTime();
          const dateB = new Date(b.snippet.publishedAt).getTime();
          return dateB - dateA;
        });
    }

    // 7) RENDER VIDEO CARDS
    function renderVideoCardsPage(videoItems, pageNum, pageSize) {
      const grid = document.getElementById('video-grid');
      grid.innerHTML = '';
      const startIdx = (pageNum - 1) * pageSize;
      const endIdx   = Math.min(startIdx + pageSize, videoItems.length);
      const pageItems = videoItems.slice(startIdx, endIdx);

      pageItems.forEach(item => {
        const thumbUrl = item.snippet.thumbnails.high.url;
        const title    = item.snippet.title;
        const views    = item.statistics.viewCount || 0;
        const videoId  = item.id;
        const watchLink = `https://www.youtube.com/watch?v=${videoId}`;

        const card = document.createElement('div');
        card.classList.add('video-card');

        const thumbContainer = document.createElement('div');
        thumbContainer.classList.add('video-thumb-container');

        const thumbImg = document.createElement('img');
        thumbImg.src = thumbUrl;
        thumbImg.alt = title;

        const thumbAnchor = document.createElement('a');
        thumbAnchor.href = watchLink;
        thumbAnchor.target = '_blank';
        thumbAnchor.rel = 'noopener';
        thumbAnchor.appendChild(thumbImg);

        thumbContainer.appendChild(thumbAnchor);
        card.appendChild(thumbContainer);

        const info = document.createElement('div');
        info.classList.add('video-info');

        const titleEl = document.createElement('h3');
        titleEl.classList.add('video-title');
        titleEl.textContent = title;
        info.appendChild(titleEl);

        const viewsEl = document.createElement('p');
        viewsEl.classList.add('video-views');
        viewsEl.textContent = formatNumber(views) + ' views';
        info.appendChild(viewsEl);

        card.appendChild(info);
        grid.appendChild(card);
      });
    }

    // 8) PAGINATION CONTROLS
    let allFilteredVideos = [];
    let currentPage = 1;
    let totalPages = 1;

    function updatePaginationControls() {
      const pagination = document.getElementById('pagination');
      pagination.innerHTML = '';
      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement('button');
        btn.textContent = i;
        btn.classList.add('page-btn');
        if (i === currentPage) {
          btn.classList.add('current');
          btn.disabled = true;
        }
        btn.addEventListener('click', () => {
          showPage(i);
        });
        pagination.appendChild(btn);
      }
    }

    function showPage(pageNum) {
      currentPage = pageNum;
      renderVideoCardsPage(allFilteredVideos, currentPage, PAGE_SIZE);
      updatePaginationControls();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // 9) INITIALIZATION
    async function init() {
      try {
        const uploadsPlaylistId = await fetchUploadsPlaylistId();
        const allVideoIds = await fetchAllVideoIds(uploadsPlaylistId);

        if (!allVideoIds.length) {
          document.getElementById('loading').textContent = 'No videos found on this channel.';
          return;
        }

        const videoDetails = await fetchVideoDetails(allVideoIds);
        allFilteredVideos = filterLongFormVideos(videoDetails);

        if (!allFilteredVideos.length) {
          document.getElementById('loading').textContent = 'No long-form videos found.';
          return;
        }

        totalPages = Math.ceil(allFilteredVideos.length / PAGE_SIZE);
        document.getElementById('loading').style.display = 'none';
        showPage(1);
      } catch (err) {
        console.error(err);
        document.getElementById('loading').textContent = 'An error occurred. Check console for details.';
      }
    }

    window.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
